<div class="container min-vh-100">
  <div class="d-flex justify-content-center flex-column">
    <div class="text-center mt-3 mb-3"><h4>Our Menu</h4></div>
    <button
      type="button"
      class="btn btn-info mx-auto"
      data-bs-toggle="modal"
      data-bs-target="#addMenuItemModal"
    >
      Add Menu Item
    </button>
  </div>

  <div id="adminMenuItems" class="row">
    <!-- Menu items will be loaded dynamically here -->
  </div>

  <!-- Modal to edit menu item from db -->
  <div class="modal fade" id="editMenuItemModal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <form id="editMenuItemForm">
          <div class="modal-header">
            <h5 class="modal-title">Edit Menu Item</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <input id="edit_menuItem_id" name="edit_menuItem_id" hidden />
              <label for="edit_foodName">Food Name:</label>
              <input
                type="text"
                id="edit_foodName"
                name="edit_foodName"
                class="form-control"
              />
              <label for="edit_foodPrice">Price:</label>
              <input
                type="number"
                id="edit_foodPrice"
                name="edit_foodPrice"
                class="form-control"
              />
              <label for="edit_foodType">Food Type:</label>
              <select
                id="edit_foodType"
                name="edit_foodType"
                class="form-control"
              >
                <option value="Main Courses">Main Courses</option>
                <option value="Side Dishes">Side Dishes</option>
                <option value="Desserts">Desserts</option>
                <option value="Beverages">Beverages</option>
              </select>
              <label for="edit_description">Description:</label>
              <input
                type="text"
                id="edit_description"
                name="edit_description"
                class="form-control"
              />
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-success">Save Changes</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal to add new menu item to db -->
  <div class="modal fade" id="addMenuItemModal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <form id="addMenuItemForm" action="#" method="POST">
          <div class="modal-header">
            <h5 class="modal-title">New Menu Item</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label for="foodName">Food Name:</label>
              <input
                type="text"
                id="foodName"
                name="foodName"
                class="form-control"
                autocomplete="off"
              />
              <label for="foodPrice">Price:</label>
              <input
                type="number"
                id="foodPrice"
                name="foodPrice"
                class="form-control"
                autocomplete="off"
              />
              <label for="foodType">Food Type:</label>
              <select id="foodType" name="foodType" class="form-control">
                <option value="Main Courses">Main Courses</option>
                <option value="Side Dishes">Side Dishes</option>
                <option value="Desserts">Desserts</option>
                <option value="Beverages">Beverages</option>
              </select>
              <label for="description">Description:</label>
              <input
                type="text"
                id="description"
                name="description"
                class="form-control"
                autocomplete="off"
              />
              <label for="image_url">Image URL:</label>
              <input
                type="text"
                id="image_url"
                name="image_url"
                class="form-control"
                autocomplete="off"
                placeholder="assets/images/food1.jpg"
              />
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-success">Submit</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Delete confirmation modal -->
  <div class="modal fade" id="deleteMenuItemModal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteConfirmationModalLabel">
            Delete Confirmation
          </h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          Are you sure you want to delete this item?
          <input id="delete_menuItem_id" name="delete_menuItem_id" hidden />
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button type="button" class="btn btn-danger">Delete</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  adminService.getMenuItems();
  adminService.init();
  $("#editMenuItemForm").submit(function (event) {
    event.preventDefault();
    event.stopImmediatePropagation();
    adminService.editMenuItem();
  });

  $("#deleteMenuItemModal").on("click", ".btn-danger", function () {
    adminService.deleteMenuItem();
  });
</script>
